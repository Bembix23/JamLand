<div class="profil-page">
  <h2>{{ 'profil.title' | translate }}</h2>

  <div class="profil-card">
    <mat-card>
      <mat-card-content>
        <form [formGroup]="profilForm" (ngSubmit)="doProfil()">
          <div>
            <mat-form-field>
              <mat-label>{{
                'profil.form.emailLabel' | translate
              }}</mat-label>
              <input matInput formControlName="email" />
              <mat-error *ngIf="profil?.errors?.['email']"
                >{{ 'profil.error' | translate }}</mat-error
              >
              <mat-error *ngIf="profil?.errors?.['required']"
                >{{ 'profil.error' | translate }}</mat-error
              >
            </mat-form-field>
          </div>
          <div>
            <mat-form-field>
              <mat-label>{{ 'profil.mdp' | translate }}</mat-label>
              <input matInput type="password" formControlName="password" />
              <mat-error>{{ 'profil.error' | translate }}</mat-error>
            </mat-form-field>
          </div>
          <div>
            <mat-form-field>
              <mat-label>Bio</mat-label>
              <input matInput formControlName="bio" /> 
              <mat-error>{{ 'profil.error' | translate }}</mat-error>
            </mat-form-field>
          </div>
          <div>
            <mat-form-field>
              <mat-label> {{ 'profil.name' | translate }}</mat-label>
              <input matInput formControlName="name" />
              <mat-error> {{ 'profil.error' | translate }}</mat-error>
            </mat-form-field>
          </div>
          <div>
            <mat-form-field>
              <mat-label>{{ 'profil.firstname' | translate }}</mat-label>
              <input matInput formControlName="firstname" />
              <mat-error>{{ 'profil.error' | translate }}</mat-error>
            </mat-form-field>
          </div>
          <div>
            <mat-slide-toggle formControlName="trading">
              {{ 'profil.trading' | translate }}
            </mat-slide-toggle>
          </div>
          <div>
            <mat-slide-toggle formControlName="viewOther">
              {{ 'profil.activity' | translate }}
            </mat-slide-toggle>
          </div>
          <div class="buttonDiv">
            <button
              mat-raised-button
              color="primary"
              type="submit"
              [disabled]="!profilForm.valid"
            >
            {{ 'profil.profilm' | translate }}
            </button>
          </div>
          <div *ngIf="isLoggedIn$ | async" class="buttonDiv mt-2 d-flex justify-content-center">
            <button mat-raised-button color="primary" (click)="logout()">
              {{ 'profil.logout' | translate }}
            </button>
          </div>
          <div class="d-flex justify-content-center">
            <webcam [width]="500" [height]="500" [trigger]="trigger$" (imageCapture)="handleSnapshot($event)"></webcam>
          </div>
          <div class="d-flex justify-content-center">
            <button mat-raised-button color="primary" (click)="takePhoto()">
              {{ 'bouton.bouton' | translate }}
            </button>
          </div>
          <div class="d-flex justify-content-center mt-4">
            <div class="rack-photo-preview" [ngClass]="{ 'd-none': !hasPreview() }">
              <img alt="Votre photo de profil"  #filePreview src="#" class="photo-preview" />
            </div>
          </div>
        </form>
      </mat-card-content>
    </mat-card>
  </div>
</div>
