<div class="profil-page">
  <h2>{{ 'profil.title' | translate }}</h2>

  <div class="profil-card">
    <mat-card>
      <mat-card-content>
        <form [formGroup]="profilForm" (ngSubmit)="doProfil()">
          <div>
            <mat-form-field>
              <mat-label>{{
                'profil.form.emailLabel' | translate
              }}</mat-label>
              <input matInput formControlName="email" />
              <mat-error *ngIf="profil?.errors?.['email']"
                >Register must be an email</mat-error
              >
              <mat-error *ngIf="profil?.errors?.['required']"
                >Register is required</mat-error
              >
            </mat-form-field>
          </div>
          <div>
            <mat-form-field>
              <mat-label>Password</mat-label>
              <input matInput type="password" formControlName="password" />
              <mat-error>Password is required</mat-error>
            </mat-form-field>
          </div>
          <div>
            <mat-form-field>
              <mat-label>Bio</mat-label>
              <input matInput formControlName="bio" /> 
              <mat-error>Bio is required</mat-error>
            </mat-form-field>
          </div>
          <div>
            <mat-form-field>
              <mat-label>Name</mat-label>
              <input matInput formControlName="name" />
              <mat-error>Name is required</mat-error>
            </mat-form-field>
          </div>
          <div>
            <mat-form-field>
              <mat-label>FirstName</mat-label>
              <input matInput formControlName="firstname" />
              <mat-error>FirstName is required</mat-error>
            </mat-form-field>
          </div>
          <div>
            <mat-slide-toggle formControlName="trading">
              Allow Trading
            </mat-slide-toggle>
          </div>
          <div>
            <mat-slide-toggle formControlName="viewOther">
              Allow other to view activity
            </mat-slide-toggle>
          </div>
          <div class="buttonDiv">
            <button
              mat-raised-button
              color="primary"
              type="submit"
              [disabled]="!profilForm.valid"
            >
              Modifier le profil
            </button>
          </div>
          <div *ngIf="isLoggedIn$ | async" class="buttonDiv mt-2 d-flex justify-content-center">
            <button mat-raised-button color="primary" (click)="logout()">
              Logout
            </button>
          </div>
          <div class="d-flex justify-content-center">
            <webcam [width]="500" [height]="500" [trigger]="trigger$" (imageCapture)="handleSnapshot($event)"></webcam>
          </div>
          <div class="d-flex justify-content-center">
            <button mat-raised-button color="primary" (click)="takePhoto()">
              Click!
            </button>
          </div>
          <div class="d-flex justify-content-center mt-4">
            <div class="rack-photo-preview" [ngClass]="{ 'd-none': !hasPreview() }">
              <img alt="Votre photo de profil"  #filePreview src="#" class="photo-preview" />
            </div>
          </div>
        </form>
      </mat-card-content>
    </mat-card>
  </div>
</div>
